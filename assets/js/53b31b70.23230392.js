"use strict";(self.webpackChunk_switchboard_xyz_v2_docs=self.webpackChunk_switchboard_xyz_v2_docs||[]).push([[2753],{5310:function(e,t,a){a.d(t,{Z:function(){return h}});var n=a(5773),r=a(808),i=a(7378),l=a(8944),o=a(5642),u=a(1652),s=a(3772),c=a(6206),d=a(4246);const m=["className","component"];var p=a(4907);const k=function(e={}){const{defaultTheme:t,defaultClassName:a="MuiBox-root",generateClassName:p,styleFunctionSx:k=u.Z}=e,h=(0,o.ZP)("div")(k);return i.forwardRef((function(e,i){const o=(0,c.Z)(t),u=(0,s.Z)(e),{className:k,component:g="div"}=u,N=(0,r.Z)(u,m);return(0,d.jsx)(h,(0,n.Z)({as:g,ref:i,className:(0,l.Z)(k,p?p(a):a),theme:o},N))}))}({defaultTheme:(0,a(2905).Z)(),defaultClassName:"MuiBox-root",generateClassName:p.Z.generate});var h=k},9523:function(e,t,a){a.d(t,{Z:function(){return N}});var n=a(5773),r=a(808),i=a(7378),l=a(8944),o=a(3892),u=a(1640),s=a(2399),c=a(2709),d=a(765);function m(e){return(0,d.Z)("MuiSvgIcon",e)}(0,a(2897).Z)("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);var p=a(4246);const k=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],h=(0,c.ZP)("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,"inherit"!==a.color&&t[`color${(0,u.Z)(a.color)}`],t[`fontSize${(0,u.Z)(a.fontSize)}`]]}})((({theme:e,ownerState:t})=>{var a,n,r,i,l,o,u,s,c,d,m,p,k,h,g,N,f;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0,transition:null==(a=e.transitions)||null==(n=a.create)?void 0:n.call(a,"fill",{duration:null==(r=e.transitions)||null==(i=r.duration)?void 0:i.shorter}),fontSize:{inherit:"inherit",small:(null==(l=e.typography)||null==(o=l.pxToRem)?void 0:o.call(l,20))||"1.25rem",medium:(null==(u=e.typography)||null==(s=u.pxToRem)?void 0:s.call(u,24))||"1.5rem",large:(null==(c=e.typography)||null==(d=c.pxToRem)?void 0:d.call(c,35))||"2.1875"}[t.fontSize],color:null!=(m=null==(p=e.palette)||null==(k=p[t.color])?void 0:k.main)?m:{action:null==(h=e.palette)||null==(g=h.action)?void 0:g.active,disabled:null==(N=e.palette)||null==(f=N.action)?void 0:f.disabled,inherit:void 0}[t.color]}})),g=i.forwardRef((function(e,t){const a=(0,s.Z)({props:e,name:"MuiSvgIcon"}),{children:i,className:c,color:d="inherit",component:g="svg",fontSize:N="medium",htmlColor:f,inheritViewBox:b=!1,titleAccess:v,viewBox:y="0 0 24 24"}=a,w=(0,r.Z)(a,k),S=(0,n.Z)({},a,{color:d,component:g,fontSize:N,instanceFontSize:e.fontSize,inheritViewBox:b,viewBox:y}),q={};b||(q.viewBox=y);const x=(e=>{const{color:t,fontSize:a,classes:n}=e,r={root:["root","inherit"!==t&&`color${(0,u.Z)(t)}`,`fontSize${(0,u.Z)(a)}`]};return(0,o.Z)(r,m,n)})(S);return(0,p.jsxs)(h,(0,n.Z)({as:g,className:(0,l.Z)(x.root,c),ownerState:S,focusable:"false",color:f,"aria-hidden":!v||void 0,role:v?"img":void 0,ref:t},q,w,{children:[i,v?(0,p.jsx)("title",{children:v}):null]}))}));g.muiName="SvgIcon";var N=g},3307:function(e,t,a){a.d(t,{ZP:function(){return c}});var n=a(5773),r=a(808),i=(a(7378),a(5318)),l=a(8128),o=(a(1510),a(2750)),u=["components"],s={toc:[]};function c(e){var t=e.components,a=(0,r.Z)(e,u);return(0,i.kt)("wrapper",(0,n.Z)({},s,a,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("table",null,(0,i.kt)("thead",null,(0,i.kt)("tr",null,(0,i.kt)("th",null,"Instruction"),(0,i.kt)("th",null,"API Resource(s)"),(0,i.kt)("th",null,"Description"))),(0,i.kt)("tbody",null,(0,i.kt)("tr",null,(0,i.kt)("td",null,(0,i.kt)("b",null,"OracleQueueInit")),(0,i.kt)("td",null,(0,i.kt)("a",{className:"nowrap",href:"/api/switchboardv2-api/classes/OracleQueueAccount#create"},(0,i.kt)(l.WZi,{className:"devicons__nowrap",mdxType:"SiTypescript"})," Typescript"),(0,i.kt)("br",null),(0,i.kt)("a",{className:"nowrap",href:"/api/switchboardpy/oraclequeue#oraclequeueinitparams-objects"},(0,i.kt)(l.Cul,{className:"devicons__nowrap",mdxType:"SiPython"})," Python"),(0,i.kt)("br",null),(0,i.kt)("a",{className:"nowrap",href:"/api/switchboardv2-cli/queue#sbv2-queuecreate"},(0,i.kt)(l.wdL,{className:"devicons__nowrap",mdxType:"SiPowershell"})," CLI")),(0,i.kt)("td",null,(0,i.kt)(o.Z,{mdxType:"Typography"},"Create a new OracleQueueAccount with a specified configuration"))),(0,i.kt)("tr",null,(0,i.kt)("td",null,(0,i.kt)("b",null,"OracleQueueSetRewards")),(0,i.kt)("td",null,(0,i.kt)("a",{className:"nowrap",href:"/api/switchboardv2-api/classes/OracleQueueAccount#setrewards"},(0,i.kt)(l.WZi,{className:"devicons__nowrap",mdxType:"SiTypescript"})," Typescript")),(0,i.kt)("td",null,(0,i.kt)(o.Z,{mdxType:"Typography"},"Set the rewards for an oracle queue"))),(0,i.kt)("tr",null,(0,i.kt)("td",null,(0,i.kt)("b",null,"PermissionSet")),(0,i.kt)("td",null,(0,i.kt)("a",{className:"nowrap",href:"/api/switchboardv2-api/classes/PermissionAccount#set"},(0,i.kt)(l.WZi,{className:"devicons__nowrap",mdxType:"SiTypescript"})," Typescript"),(0,i.kt)("br",null),(0,i.kt)("a",{className:"nowrap",href:"/api/switchboardv2-cli/queue#sbv2-queuepermitaggregator-aggregatorkey"},(0,i.kt)(l.wdL,{className:"devicons__nowrap",mdxType:"SiPowershell"})," CLI")),(0,i.kt)("td",null,(0,i.kt)(o.Z,{mdxType:"Typography"},"As the authority, set the permissions for a given PermissionAccount"))))))}c.isMDXComponent=!0},471:function(e,t,a){a.r(t),a.d(t,{contentTitle:function(){return u},default:function(){return m},frontMatter:function(){return o},metadata:function(){return s},toc:function(){return c}});var n=a(5773),r=a(808),i=(a(7378),a(5318)),l=["components"],o={},u=void 0,s={unversionedId:"idl/accounts/OracleQueueAccountData",id:"idl/accounts/OracleQueueAccountData",title:"OracleQueueAccountData",description:"Size 0.009723120 SOL",source:"@site/api/idl/accounts/OracleQueueAccountData.md",sourceDirName:"idl/accounts",slug:"/idl/accounts/OracleQueueAccountData",permalink:"/api/idl/accounts/OracleQueueAccountData",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"OracleAccountData",permalink:"/api/idl/accounts/OracleAccountData"},next:{title:"OracleQueueBuffer",permalink:"/api/idl/accounts/OracleQueueBuffer"}},c=[],d={toc:c};function m(e){var t=e.components,a=(0,r.Z)(e,l);return(0,i.kt)("wrapper",(0,n.Z)({},d,a,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("b",null,"Size: "),"1269 Bytes",(0,i.kt)("br",null),(0,i.kt)("b",null,"Rent Exemption: "),"0.009723120 SOL",(0,i.kt)("br",null),(0,i.kt)("br",null),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Field"),(0,i.kt)("th",{parentName:"tr",align:null},"Type"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"name"),(0,i.kt)("td",{parentName:"tr",align:null},"u8","[32]"),(0,i.kt)("td",{parentName:"tr",align:null},"Name of the queue to store on-chain.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"metadata"),(0,i.kt)("td",{parentName:"tr",align:null},"u8","[64]"),(0,i.kt)("td",{parentName:"tr",align:null},"Metadata of the queue to store on-chain.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"authority"),(0,i.kt)("td",{parentName:"tr",align:null},"publicKey"),(0,i.kt)("td",{parentName:"tr",align:null},"The account delegated as the authority to for creating permissions targeted at the queue.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"oracleTimeout"),(0,i.kt)("td",{parentName:"tr",align:null},"u32"),(0,i.kt)("td",{parentName:"tr",align:null},"Time period we should remove an oracle after if no response.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"reward"),(0,i.kt)("td",{parentName:"tr",align:null},"u64"),(0,i.kt)("td",{parentName:"tr",align:null},"Rewards to provide oracles and round openers on this queue.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"minStake"),(0,i.kt)("td",{parentName:"tr",align:null},"u64"),(0,i.kt)("td",{parentName:"tr",align:null},"The minimum amount of stake oracles must present to remain on the queue.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"slashingEnabled"),(0,i.kt)("td",{parentName:"tr",align:null},"bool"),(0,i.kt)("td",{parentName:"tr",align:null},"Whether slashing is enabled on this queue.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"varianceToleranceMultiplier"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"/api/idl/types/SwitchboardDecimal"},"SwitchboardDecimal")),(0,i.kt)("td",{parentName:"tr",align:null},"The tolerated variance amount oracle results can have from the accepted round result before being slashed. slashBound = varianceToleranceMultiplier * stdDeviation Default: 2")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"feedProbationPeriod"),(0,i.kt)("td",{parentName:"tr",align:null},"u32"),(0,i.kt)("td",{parentName:"tr",align:null},"After a feed lease is funded or re-funded, it must consecutively succeed N amount of times or its authorization to use the queue is auto-revoked.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"currIdx"),(0,i.kt)("td",{parentName:"tr",align:null},"u32"),(0,i.kt)("td",{parentName:"tr",align:null},"Current index of the oracle rotation.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"size"),(0,i.kt)("td",{parentName:"tr",align:null},"u32"),(0,i.kt)("td",{parentName:"tr",align:null},"Current number of oracles on a queue.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"gcIdx"),(0,i.kt)("td",{parentName:"tr",align:null},"u32"),(0,i.kt)("td",{parentName:"tr",align:null},"Garbage collection index.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"consecutiveFeedFailureLimit"),(0,i.kt)("td",{parentName:"tr",align:null},"u64"),(0,i.kt)("td",{parentName:"tr",align:null},"Consecutive failure limit for a feed before feed permission is revoked.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"consecutiveOracleFailureLimit"),(0,i.kt)("td",{parentName:"tr",align:null},"u64"),(0,i.kt)("td",{parentName:"tr",align:null},"Consecutive failure limit for an oracle before oracle permission is revoked.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"unpermissionedFeedsEnabled"),(0,i.kt)("td",{parentName:"tr",align:null},"bool"),(0,i.kt)("td",{parentName:"tr",align:null},"Enabling this setting means data feeds do not need explicit permission to join the queue and request new values from its oracles.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"unpermissionedVrfEnabled"),(0,i.kt)("td",{parentName:"tr",align:null},"bool"),(0,i.kt)("td",{parentName:"tr",align:null},"Enabling this setting means VRF accounts do not need explicit permission to join the queue and request new values from its oracles.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"ebuf"),(0,i.kt)("td",{parentName:"tr",align:null},"u8","[1022]"),(0,i.kt)("td",{parentName:"tr",align:null},"Reserved.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"maxSize"),(0,i.kt)("td",{parentName:"tr",align:null},"u32"),(0,i.kt)("td",{parentName:"tr",align:null},"Maximum number of oracles a queue can support.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"dataBuffer"),(0,i.kt)("td",{parentName:"tr",align:null},"publicKey"),(0,i.kt)("td",{parentName:"tr",align:null},"Pubkey of the on-chain account holding the queue data.")))))}m.isMDXComponent=!0},4295:function(e,t,a){a.r(t),a.d(t,{contentTitle:function(){return d},default:function(){return h},frontMatter:function(){return c},metadata:function(){return m},toc:function(){return p}});var n=a(5773),r=a(808),i=(a(7378),a(5318)),l=["components"],o={toc:[]};function u(e){var t=e.components,a=(0,r.Z)(e,l);return(0,i.kt)("wrapper",(0,n.Z)({},o,a,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Field"),(0,i.kt)("th",{parentName:"tr",align:null},"Type"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"data"),(0,i.kt)("td",{parentName:"tr",align:null},"publicKey[]"),(0,i.kt)("td",{parentName:"tr",align:null},"Buffer account storing an array of oracle public keys.")))))}u.isMDXComponent=!0;var s=["components"],c={},d=void 0,m={unversionedId:"idl/accounts/OracleQueueBuffer",id:"idl/accounts/OracleQueueBuffer",title:"OracleQueueBuffer",description:"Serialized buffer account storing the list of oracle's for a queue.",source:"@site/api/idl/accounts/OracleQueueBuffer.md",sourceDirName:"idl/accounts",slug:"/idl/accounts/OracleQueueBuffer",permalink:"/api/idl/accounts/OracleQueueBuffer",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"OracleQueueAccountData",permalink:"/api/idl/accounts/OracleQueueAccountData"},next:{title:"PermissionAccountData",permalink:"/api/idl/accounts/PermissionAccountData"}},p=[],k={toc:p};function h(e){var t=e.components,a=(0,r.Z)(e,s);return(0,i.kt)("wrapper",(0,n.Z)({},k,a,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"Serialized buffer account storing the list of oracle's for a queue."),(0,i.kt)("b",null,"Size: "),"8 Bytes + (32 Bytes \xd7 Num Oracles)",(0,i.kt)("br",null),(0,i.kt)("b",null,"Rent Exemption: ")," Dependent on number of oracles.",(0,i.kt)("br",null),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0 1,000 oracles:\xa0\xa0 0.223666560 SOL",(0,i.kt)("br",null),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0 25,000 oracles: 5.568946560 SOL",(0,i.kt)("br",null),(0,i.kt)("br",null),(0,i.kt)(u,{mdxType:"QueueBuffer"}))}h.isMDXComponent=!0},6378:function(e,t,a){a.r(t),a.d(t,{contentTitle:function(){return u},default:function(){return m},frontMatter:function(){return o},metadata:function(){return s},toc:function(){return c}});var n=a(5773),r=a(808),i=(a(7378),a(5318)),l=["components"],o={},u=void 0,s={unversionedId:"idl/instructions/oracleQueueInit",id:"idl/instructions/oracleQueueInit",title:"oracleQueueInit",description:"Create and initialize the OracleQueueAccount.",source:"@site/api/idl/instructions/oracleQueueInit.md",sourceDirName:"idl/instructions",slug:"/idl/instructions/oracleQueueInit",permalink:"/api/idl/instructions/oracleQueueInit",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"oracleInit",permalink:"/api/idl/instructions/oracleInit"},next:{title:"oracleQueueSetRewards",permalink:"/api/idl/instructions/oracleQueueSetRewards"}},c=[{value:"Accounts",id:"accounts",children:[],level:2},{value:"Params",id:"params",children:[],level:2}],d={toc:c};function m(e){var t=e.components,a=(0,r.Z)(e,l);return(0,i.kt)("wrapper",(0,n.Z)({},d,a,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"Create and initialize the OracleQueueAccount."),(0,i.kt)("h2",{id:"accounts"},"Accounts"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Name"),(0,i.kt)("th",{parentName:"tr",align:null},"isMut"),(0,i.kt)("th",{parentName:"tr",align:null},"isSigner"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"oracleQueue"),(0,i.kt)("td",{parentName:"tr",align:null},"TRUE"),(0,i.kt)("td",{parentName:"tr",align:null},"TRUE"),(0,i.kt)("td",{parentName:"tr",align:null})),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"authority"),(0,i.kt)("td",{parentName:"tr",align:null},"FALSE"),(0,i.kt)("td",{parentName:"tr",align:null},"FALSE"),(0,i.kt)("td",{parentName:"tr",align:null},"The account delegated as the authority to for creating permissions targeted at the queue.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"buffer"),(0,i.kt)("td",{parentName:"tr",align:null},"TRUE"),(0,i.kt)("td",{parentName:"tr",align:null},"FALSE"),(0,i.kt)("td",{parentName:"tr",align:null})),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"payer"),(0,i.kt)("td",{parentName:"tr",align:null},"TRUE"),(0,i.kt)("td",{parentName:"tr",align:null},"FALSE"),(0,i.kt)("td",{parentName:"tr",align:null})),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"systemProgram"),(0,i.kt)("td",{parentName:"tr",align:null},"FALSE"),(0,i.kt)("td",{parentName:"tr",align:null},"FALSE"),(0,i.kt)("td",{parentName:"tr",align:null},"The Solana system program account.")))),(0,i.kt)("h2",{id:"params"},"Params"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Field"),(0,i.kt)("th",{parentName:"tr",align:null},"Type"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"name"),(0,i.kt)("td",{parentName:"tr",align:null},"u8","[32]"),(0,i.kt)("td",{parentName:"tr",align:null},"Name of the queue to store on-chain.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"metadata"),(0,i.kt)("td",{parentName:"tr",align:null},"u8","[64]"),(0,i.kt)("td",{parentName:"tr",align:null},"Metadata of the queue to store on-chain.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"reward"),(0,i.kt)("td",{parentName:"tr",align:null},"u64"),(0,i.kt)("td",{parentName:"tr",align:null},"Rewards to provide oracles and round openers on this queue.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"minStake"),(0,i.kt)("td",{parentName:"tr",align:null},"u64"),(0,i.kt)("td",{parentName:"tr",align:null},"The minimum amount of stake oracles must present to remain on the queue.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"feedProbationPeriod"),(0,i.kt)("td",{parentName:"tr",align:null},"u32"),(0,i.kt)("td",{parentName:"tr",align:null},"After a feed lease is funded or re-funded, it must consecutively succeed N amount of times or its authorization to use the queue is auto-revoked.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"oracleTimeout"),(0,i.kt)("td",{parentName:"tr",align:null},"u32"),(0,i.kt)("td",{parentName:"tr",align:null},"Time period we should remove an oracle after if no response.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"slashingEnabled"),(0,i.kt)("td",{parentName:"tr",align:null},"bool"),(0,i.kt)("td",{parentName:"tr",align:null},"Whether slashing is enabled on this queue.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"varianceToleranceMultiplier"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"/api/idl/types/BorshDecimal"},"BorshDecimal")),(0,i.kt)("td",{parentName:"tr",align:null},"The tolerated variance amount oracle results can have from the accepted round result before being slashed. slashBound = varianceToleranceMultiplier * stdDeviation Default: 2")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"consecutiveFeedFailureLimit"),(0,i.kt)("td",{parentName:"tr",align:null},"u64"),(0,i.kt)("td",{parentName:"tr",align:null},"Consecutive failure limit for a feed before feed permission is revoked.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"consecutiveOracleFailureLimit"),(0,i.kt)("td",{parentName:"tr",align:null},"u64"),(0,i.kt)("td",{parentName:"tr",align:null},"Consecutive failure limit for an oracle before oracle permission is revoked.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"queueSize"),(0,i.kt)("td",{parentName:"tr",align:null},"u32"),(0,i.kt)("td",{parentName:"tr",align:null},"The size of the queue.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"unpermissionedFeeds"),(0,i.kt)("td",{parentName:"tr",align:null},"bool"),(0,i.kt)("td",{parentName:"tr",align:null},"Enabling this setting means data feeds do not need explicit permission to join the queue.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"unpermissionedVrf"),(0,i.kt)("td",{parentName:"tr",align:null},"bool"),(0,i.kt)("td",{parentName:"tr",align:null})))))}m.isMDXComponent=!0},5804:function(e,t,a){a.r(t),a.d(t,{contentTitle:function(){return u},default:function(){return m},frontMatter:function(){return o},metadata:function(){return s},toc:function(){return c}});var n=a(5773),r=a(808),i=(a(7378),a(5318)),l=["components"],o={},u=void 0,s={unversionedId:"idl/instructions/oracleQueueSetRewards",id:"idl/instructions/oracleQueueSetRewards",title:"oracleQueueSetRewards",description:"Set the rewards to provide oracles and round openers on this queue.",source:"@site/api/idl/instructions/oracleQueueSetRewards.md",sourceDirName:"idl/instructions",slug:"/idl/instructions/oracleQueueSetRewards",permalink:"/api/idl/instructions/oracleQueueSetRewards",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"oracleQueueInit",permalink:"/api/idl/instructions/oracleQueueInit"},next:{title:"oracleQueueVrfConfig",permalink:"/api/idl/instructions/oracleQueueVrfConfig"}},c=[{value:"Accounts",id:"accounts",children:[],level:2},{value:"Params",id:"params",children:[],level:2}],d={toc:c};function m(e){var t=e.components,a=(0,r.Z)(e,l);return(0,i.kt)("wrapper",(0,n.Z)({},d,a,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"Set the rewards to provide oracles and round openers on this queue."),(0,i.kt)("h2",{id:"accounts"},"Accounts"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Name"),(0,i.kt)("th",{parentName:"tr",align:null},"isMut"),(0,i.kt)("th",{parentName:"tr",align:null},"isSigner"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"queue"),(0,i.kt)("td",{parentName:"tr",align:null},"TRUE"),(0,i.kt)("td",{parentName:"tr",align:null},"FALSE"),(0,i.kt)("td",{parentName:"tr",align:null})),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"authority"),(0,i.kt)("td",{parentName:"tr",align:null},"FALSE"),(0,i.kt)("td",{parentName:"tr",align:null},"TRUE"),(0,i.kt)("td",{parentName:"tr",align:null},"The account delegated as the authority to for creating permissions targeted at the queue.")))),(0,i.kt)("h2",{id:"params"},"Params"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Field"),(0,i.kt)("th",{parentName:"tr",align:null},"Type"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"rewards"),(0,i.kt)("td",{parentName:"tr",align:null},"u64"),(0,i.kt)("td",{parentName:"tr",align:null},"Rewards to provide oracles and round openers on this queue.")))))}m.isMDXComponent=!0},4769:function(e,t,a){a.r(t),a.d(t,{contentTitle:function(){return u},default:function(){return m},frontMatter:function(){return o},metadata:function(){return s},toc:function(){return c}});var n=a(5773),r=a(808),i=(a(7378),a(5318)),l=["components"],o={},u=void 0,s={unversionedId:"idl/instructions/permissionSet",id:"idl/instructions/permissionSet",title:"permissionSet",description:"Sets the permission in the PermissionAccount",source:"@site/api/idl/instructions/permissionSet.md",sourceDirName:"idl/instructions",slug:"/idl/instructions/permissionSet",permalink:"/api/idl/instructions/permissionSet",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"permissionInit",permalink:"/api/idl/instructions/permissionInit"},next:{title:"programConfig",permalink:"/api/idl/instructions/programConfig"}},c=[{value:"Accounts",id:"accounts",children:[],level:2},{value:"Params",id:"params",children:[],level:2}],d={toc:c};function m(e){var t=e.components,a=(0,r.Z)(e,l);return(0,i.kt)("wrapper",(0,n.Z)({},d,a,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"Sets the permission in the PermissionAccount"),(0,i.kt)("h2",{id:"accounts"},"Accounts"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Name"),(0,i.kt)("th",{parentName:"tr",align:null},"isMut"),(0,i.kt)("th",{parentName:"tr",align:null},"isSigner"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"permission"),(0,i.kt)("td",{parentName:"tr",align:null},"TRUE"),(0,i.kt)("td",{parentName:"tr",align:null},"FALSE"),(0,i.kt)("td",{parentName:"tr",align:null},"The ",(0,i.kt)("a",{parentName:"td",href:"/api/idl/accounts/PermissionAccountData"},"PermissionAccountData")," that is being updated.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"authority"),(0,i.kt)("td",{parentName:"tr",align:null},"FALSE"),(0,i.kt)("td",{parentName:"tr",align:null},"TRUE"),(0,i.kt)("td",{parentName:"tr",align:null},"The ",(0,i.kt)("a",{parentName:"td",href:"/api/idl/accounts/PermissionAccountData"},"PermissionAccountData")," authority that can update an account's permissions.")))),(0,i.kt)("h2",{id:"params"},"Params"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Field"),(0,i.kt)("th",{parentName:"tr",align:null},"Type"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"permission"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"/api/idl/types/SwitchboardPermission"},"SwitchboardPermission")),(0,i.kt)("td",{parentName:"tr",align:null},"The ",(0,i.kt)("a",{parentName:"td",href:"/api/idl/types/SwitchboardPermission"},"SwitchboardPermission")," enumeration to set.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"enable"),(0,i.kt)("td",{parentName:"tr",align:null},"bool"),(0,i.kt)("td",{parentName:"tr",align:null},"Specifies whether to enable or disable the permission.")))))}m.isMDXComponent=!0},5584:function(e,t,a){a.r(t),a.d(t,{contentTitle:function(){return u},default:function(){return m},frontMatter:function(){return o},metadata:function(){return s},toc:function(){return c}});var n=a(5773),r=a(808),i=(a(7378),a(5318)),l=["components"],o={},u=void 0,s={unversionedId:"idl/types/SwitchboardPermission",id:"idl/types/SwitchboardPermission",title:"SwitchboardPermission",description:"| Name                   | Value | Description                                                                                                                                                                               |",source:"@site/api/idl/types/SwitchboardPermission.md",sourceDirName:"idl/types",slug:"/idl/types/SwitchboardPermission",permalink:"/api/idl/types/SwitchboardPermission",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"SwitchboardDecimal",permalink:"/api/idl/types/SwitchboardDecimal"},next:{title:"VrfBuilder",permalink:"/api/idl/types/VrfBuilder"}},c=[],d={toc:c};function m(e){var t=e.components,a=(0,r.Z)(e,l);return(0,i.kt)("wrapper",(0,n.Z)({},d,a,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Name"),(0,i.kt)("th",{parentName:"tr",align:null},"Value"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"NONE"),(0,i.kt)("td",{parentName:"tr",align:null},"0"),(0,i.kt)("td",{parentName:"tr",align:null},"No permissions currently granted between granter and grantee.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"PermitOracleHeartbeat"),(0,i.kt)("td",{parentName:"tr",align:null},"1"),(0,i.kt)("td",{parentName:"tr",align:null},"queue ",(0,i.kt)("inlineCode",{parentName:"td"},"authority")," has permitted an Oracle Account to heartbeat on it's queue and receive update requests. Oracles ",(0,i.kt)("em",{parentName:"td"},"always")," need permissions to join a queue.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"PermitOracleQueueUsage"),(0,i.kt)("td",{parentName:"tr",align:null},"2"),(0,i.kt)("td",{parentName:"tr",align:null},"queue ",(0,i.kt)("inlineCode",{parentName:"td"},"authority")," has permitted an Aggregator Account to request updates from it's oracles or join an existing crank. ",(0,i.kt)("strong",{parentName:"td"},"Note:")," Not required if a queue has ",(0,i.kt)("inlineCode",{parentName:"td"},"unpermissionedFeedsEnabled"),".")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"PermitVrfRequests"),(0,i.kt)("td",{parentName:"tr",align:null},"3"),(0,i.kt)("td",{parentName:"tr",align:null},"queue ",(0,i.kt)("inlineCode",{parentName:"td"},"authority")," has permitted a VRF Account to request randomness from it's oracles. ",(0,i.kt)("strong",{parentName:"td"},"Note:")," Not required if a queue has ",(0,i.kt)("inlineCode",{parentName:"td"},"unpermissionedVrfEnabled"),".")))))}m.isMDXComponent=!0},5886:function(e,t,a){a.d(t,{Z:function(){return s}});var n=a(5773),r=a(808),i=a(7378),l=a(1050),o=["toc","className","linkClassName","linkActiveClassName","minHeadingLevel","maxHeadingLevel"];function u(e){var t=e.toc,a=e.className,n=e.linkClassName,r=e.isChild;return t.length?i.createElement("ul",{className:r?void 0:a},t.map((function(e){return i.createElement("li",{key:e.id},i.createElement("a",{href:"#"+e.id,className:null!=n?n:void 0,dangerouslySetInnerHTML:{__html:e.value}}),i.createElement(u,{isChild:!0,toc:e.children,className:a,linkClassName:n}))}))):null}function s(e){var t=e.toc,a=e.className,s=void 0===a?"table-of-contents table-of-contents__left-border":a,c=e.linkClassName,d=void 0===c?"table-of-contents__link":c,m=e.linkActiveClassName,p=void 0===m?void 0:m,k=e.minHeadingLevel,h=e.maxHeadingLevel,g=(0,r.Z)(e,o),N=(0,l.LU)(),f=null!=k?k:N.tableOfContents.minHeadingLevel,b=null!=h?h:N.tableOfContents.maxHeadingLevel,v=(0,l.DA)({toc:t,minHeadingLevel:f,maxHeadingLevel:b}),y=(0,i.useMemo)((function(){if(d&&p)return{linkClassName:d,linkActiveClassName:p,minHeadingLevel:f,maxHeadingLevel:b}}),[d,p,f,b]);return(0,l.Si)(y),i.createElement(u,(0,n.Z)({toc:v,className:s,linkClassName:d},g))}},6003:function(e,t,a){var n=a(5310),r=a(7378),i=a(1142),l=a(2638);t.Z=function(e){var t=(0,l.Z)().isDarkTheme,a="inherit";e.lightBg&&!t&&(a=e.lightBg),e.darkBg&&t&&(a=e.darkBg);var o={};return e.sx&&(o=Object.assign({backgroundColor:a,m:"auto",display:"flex"},o,e.sx)),r.createElement(n.Z,{component:"img",sx:o,src:(0,i.Z)(e.img)})}},1510:function(e,t,a){a.d(t,{N:function(){return l}});var n=a(9523),r=a(5773),i=a(7378);function l(e){return i.createElement(n.Z,(0,r.Z)({},e,{viewBox:"0 0 251 283.9"}),i.createElement("linearGradient",{id:"SVGID_1_",gradientUnits:"userSpaceOnUse",x1:"125.5",y1:"52.0877",x2:"125.5",y2:"253.0878",gradientTransform:"matrix(1 0 0 -1 0 285.9755)"},i.createElement("stop",{offset:"0"}),i.createElement("stop",{offset:"1"})),i.createElement("path",{d:"M125.5,233.9c-43.1,0-78.1-35-78.1-78.1c0-41.9,70.7-115.9,73.7-119l3.7-3.9l3.8,3.8c3.1,3.1,75,77.1,75,119 C203.6,198.9,168.6,233.9,125.5,233.9L125.5,233.9z M124.9,48c-6.2,6.7-19.2,21.2-32.1,38.2c-22.9,30.2-35,54.2-35,69.5 c0,37.3,30.4,67.7,67.7,67.7s67.7-30.4,67.7-67.7c0-15.3-12.3-39.3-35.6-69.5C144.5,69.3,131.2,54.7,124.9,48z"}),i.createElement("linearGradient",{id:"SVGID_2_",gradientUnits:"userSpaceOnUse",x1:"125.6",y1:"27.0877",x2:"125.6",y2:"269.3627",gradientTransform:"matrix(1 0 0 -1 0 285.9755)"},i.createElement("stop",{offset:"0"}),i.createElement("stop",{offset:"1"})),i.createElement("path",{d:"M125.5,258.9c-56.9,0-103.1-46.3-103.1-103.1c0-55.6,77.6-133.2,80.9-136.4c2-2,5.4-2,7.4,0s2,5.4,0,7.4 c-0.8,0.8-77.8,77.8-77.8,129c0,51.1,41.6,92.7,92.7,92.7s92.7-41.6,92.7-92.7c0-21-13.6-50-39.4-84.1 c-19.8-26.1-39.7-45.9-39.9-46.1c-2.1-2-2.1-5.3,0-7.4c2-2.1,5.3-2.1,7.4,0c3.4,3.3,82.4,81.9,82.4,137.6 C228.6,212.6,182.4,258.9,125.5,258.9L125.5,258.9z"}),i.createElement("linearGradient",{id:"SVGID_3_",gradientUnits:"userSpaceOnUse",x1:"125.5",y1:"2.0877",x2:"125.5",y2:"285.9755",gradientTransform:"matrix(1 0 0 -1 0 285.9755)"},i.createElement("stop",{offset:"0"}),i.createElement("stop",{offset:"1"})),i.createElement("path",{d:"M125.5,283.9C56.3,283.9,0,227.6,0,158.4c0-28.6,14.4-63.8,42.7-104.5C63.6,23.9,84.1,2.5,85,1.6 c2-2.1,5.3-2.1,7.4-0.1s2.1,5.3,0.1,7.4C92.3,9.1,71.6,30.7,51.2,60c-26.7,38.3-40.8,72.3-40.8,98.4c0,63.4,51.6,115.1,115.1,115.1 s115.1-51.6,115.1-115.1c0-26.1-14.2-60.1-41.1-98.4C178.9,30.7,158,9.1,157.8,8.9c-2-2.1-2-5.4,0.1-7.4s5.4-2,7.4,0.1 c3.5,3.6,85.7,89,85.7,156.8C251,227.6,194.7,283.9,125.5,283.9z"}))}},3195:function(e,t,a){a.r(t),a.d(t,{contentTitle:function(){return d},default:function(){return h},frontMatter:function(){return c},metadata:function(){return m},toc:function(){return p}});var n=a(5773),r=a(808),i=(a(7378),a(5318)),l=a(6003);a(9556),a(5886);var o=a(3307),u=a(471),s=(a(4295),a(6378),a(5804),a(4769),a(5584),["components"]),c={sidebar_position:2,slug:".",title:"Oracle Queue"},d=void 0,m={unversionedId:"architecture/oracle-queue",id:"architecture/oracle-queue",title:"Oracle Queue",description:"An oracle queue governs a realm of oracles, data feeds, and randomness accounts. An oracle queue, and most of the other Switchboard accounts, have an authority field which specifies which keypair is permitted to make account changes. The authority could be controlled by a DAO to make the queue governed by its network participants.",source:"@site/docs/architecture/oracle-queue.mdx",sourceDirName:"architecture",slug:"/architecture/",permalink:"/architecture/",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2,slug:".",title:"Oracle Queue"},sidebar:"tutorialSidebar",previous:{title:"Program",permalink:"/program"},next:{title:"Permissions",permalink:"/architecture/permissions/"}},p=[{value:"Functions",id:"functions",children:[{value:"\ud83d\ude80Configuration",id:"configuration",children:[{value:"maxSize",id:"maxsize",children:[],level:4},{value:"Crank Account(s)",id:"crank-accounts",children:[],level:4}],level:3},{value:"\ud83d\ude80Permission",id:"permission",children:[],level:3},{value:"\ud83d\ude80Update Requests",id:"update-requests",children:[],level:3},{value:"\ud83d\ude80Oracle Incentives",id:"oracle-incentives",children:[{value:"minStake",id:"minstake",children:[],level:4},{value:"Oracle Rewards",id:"oracle-rewards",children:[],level:4},{value:"Slashing",id:"slashing",children:[],level:4}],level:3}],level:2},{value:"Account Schema",id:"account-schema",children:[{value:"\ud83d\udce6OracleQueueAccountData",id:"oraclequeueaccountdata",children:[],level:3}],level:2},{value:"Developer Resources",id:"developer-resources",children:[],level:2}],k={toc:p};function h(e){var t=e.components,a=(0,r.Z)(e,s);return(0,i.kt)("wrapper",(0,n.Z)({},k,a,{components:t,mdxType:"MDXLayout"}),(0,i.kt)(l.Z,{img:"/img/L1_L2_Queue_Functional_Updates.png",mdxType:"MarkdownImage"}),(0,i.kt)("p",null,"An oracle queue governs a ",(0,i.kt)("em",{parentName:"p"},"realm")," of oracles, data feeds, and randomness accounts. An oracle queue, and most of the other Switchboard accounts, have an ",(0,i.kt)("inlineCode",{parentName:"p"},"authority")," field which specifies which keypair is permitted to make account changes. The ",(0,i.kt)("inlineCode",{parentName:"p"},"authority")," could be controlled by a DAO to make the queue governed by its network participants."),(0,i.kt)("p",null,"An oracle queue can be divided into the following domains:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/architecture/permissions"},(0,i.kt)("strong",{parentName:"a"},"Queue Permissions")),": Controls how an oracle queues resources get allocated."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/architecture/oracles"},(0,i.kt)("strong",{parentName:"a"},"Oracles")),": Maintains the list of active oracles and how they get allocated to update request."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/architecture/randomness"},(0,i.kt)("strong",{parentName:"a"},"Randomness")),": Allows developers to request a verifiable random value on-chain."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/architecture/feeds"},(0,i.kt)("strong",{parentName:"a"},"Data Feeds")),": Allows developers to build data feeds and publish on-chain.")),(0,i.kt)("h2",{id:"functions"},"Functions"),(0,i.kt)("p",null,"An oracle queue is responsible for the following functions:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"#configuration"},(0,i.kt)("strong",{parentName:"a"},"Configuration")),": Dictates the queue's configuration such as it' ",(0,i.kt)("inlineCode",{parentName:"li"},"maxSize")," or the number of cranks attached"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"#permission"},(0,i.kt)("strong",{parentName:"a"},"Permission")),": Dictates how new entities can join and use its resources"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"#update-requests"},(0,i.kt)("strong",{parentName:"a"},"Update Requests")),": Controls how update requests get allocated to oracles, whether manual or via a crank"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"#oracle-incentives"},(0,i.kt)("strong",{parentName:"a"},"Oracle Incentives")),": Sets the oracle rewards and slashing mechanisms, which influences queue security")),(0,i.kt)("h3",{id:"configuration"},"\ud83d\ude80Configuration"),(0,i.kt)("h4",{id:"maxsize"},"maxSize"),(0,i.kt)("p",null,"When creating a queue with the OracleQueueInit instruction, an ",(0,i.kt)("a",{parentName:"p",href:"#oraclequeuebuffer"},"OracleQueueBuffer")," account must be initialized with a size of 8 Bytes + (32 Bytes \xd7 ",(0,i.kt)("inlineCode",{parentName:"p"},"maxSize"),"), where ",(0,i.kt)("inlineCode",{parentName:"p"},"maxSize")," is the maximum number of oracles the queue can support. Once a buffer is full, oracles must be removed before new oracles can join the network."),(0,i.kt)("h4",{id:"crank-accounts"},"Crank Account(s)"),(0,i.kt)("p",null,"A queue ",(0,i.kt)("inlineCode",{parentName:"p"},"authority")," can choose to create one or many cranks, allowing an aggregator with sufficient permissions to join. The crank is a scheduling mechanism that tracks a collection of aggregators and their next available update time. The crank can be turned by anyone, and if successful, the crank turner will be rewarded for jump starting the system."),(0,i.kt)("p",null,"Aggregators on a crank are ordered by their next available update time with some level of jitter, providing a maximum update interval of 2 \xd7 an aggregator's ",(0,i.kt)("inlineCode",{parentName:"p"},"minUpdateDelaySeconds"),". This is to mitigate oracles being assigned to the same aggregator update request, making a feed vulnerable to a malicious oracle."),(0,i.kt)("h3",{id:"permission"},"\ud83d\ude80Permission"),(0,i.kt)("p",null,"See ",(0,i.kt)("a",{parentName:"p",href:"/architecture/permissions"},"/architecture/permissions")," for more information on how a queue manages access to its resources."),(0,i.kt)("h3",{id:"update-requests"},"\ud83d\ude80Update Requests"),(0,i.kt)("p",null,"The OracleQueueBuffer account stores a list of oracle public keys in a round robin fashion, using ",(0,i.kt)("inlineCode",{parentName:"p"},"currIdx")," to track its position upon subsequent openRound calls. Oracle positions are periodically swapped in the buffer account to mitigate oracles being assigned the same data feeds each update cycle."),(0,i.kt)("p",null,"An aggregator with sufficient queue permissions can manually request a new value by calling the openRound instruction. If the aggregator's configuration permits it, the next N oracles will be assigned to the data feed update request. A queue's primary function is to allocate oracles to data feed update requests and keep the round robin queue cycling. The queue will periodically swap oracle positions to mitigate oracles being assigned the same data feed update request each cycle."),(0,i.kt)("h3",{id:"oracle-incentives"},"\ud83d\ude80Oracle Incentives"),(0,i.kt)("p",null,"Switchboard is an open network allowing anyone to run an oracle but there are many reasons an oracle may be incentivized to game the system. For example, if we know a smart contract is using a particular feed to calculate a collateral ratio, an oracle could under-report the asset price and cause a liquidation or cause someone to not get the fair market rate for a trade. There\u2019s a myriad of reasons an oracle could try and cheat so careful consideration was given to incentivize honest oracle behavior."),(0,i.kt)("h4",{id:"minstake"},"minStake"),(0,i.kt)("p",null,"Oracles are required to provide the queue's ",(0,i.kt)("inlineCode",{parentName:"p"},"minStake")," to the oracle's tokenAccount, which acts as an insurance policy to entice oracle operators to report honest results. Each oracle queue can have different staking requirements to influence its security. If the staking requirement is set too low it could attract dishonest oracles, but if set too high oracles may find a better use of their capital elsewhere."),(0,i.kt)("h4",{id:"oracle-rewards"},"Oracle Rewards"),(0,i.kt)("p",null,"An oracle\u2019s reward for a given round is determined by the queue's ",(0,i.kt)("inlineCode",{parentName:"p"},"reward"),". Oracles are rewarded each time they submit a result and then reevaluated when an accepted result has been accepted. When a result has been accepted, the oracle rewards are redistributed to the oracles that responded within the acceptable range. The median result filters the outliers and means an attacker needs to control the majority of the assigned oracles in order to skew a result. This is why increasing the queue's ",(0,i.kt)("inlineCode",{parentName:"p"},"minStake")," requirements increases the security of the network because the attacker will need more up-front capital to fund the attack. Oracle\u2019s get assigned to data feeds in a round robin fashion with feeds scheduled at varying intervals and oracle batchSize's, so even if an attacker controls a large number of the queue's oracles, there is no guarantee their oracles will get assigned to the same feed."),(0,i.kt)("h4",{id:"slashing"},"Slashing"),(0,i.kt)("p",null,"Switchboard uses the median oracle response to determine the accepted result. When initializing a queue, the queue ",(0,i.kt)("inlineCode",{parentName:"p"},"authority")," specifies a ",(0,i.kt)("inlineCode",{parentName:"p"},"varianceToleranceMultiplier")," which determines the range oracle responses may differ. An oracle queue defaults to two standard deviations. If a queue has ",(0,i.kt)("inlineCode",{parentName:"p"},"slashingEnabled"),", any oracle who responded outside the acceptable range will be slashed and lose a portion of their staked capital. The slashing amount can be changed by the DAO to further incentivize honest oracle behavior."),(0,i.kt)("h2",{id:"account-schema"},"Account Schema"),(0,i.kt)("h3",{id:"oraclequeueaccountdata"},"\ud83d\udce6OracleQueueAccountData"),(0,i.kt)(u.default,{mdxType:"OracleQueueAccountData"}),(0,i.kt)("h2",{id:"developer-resources"},"Developer Resources"),(0,i.kt)(o.ZP,{mdxType:"QueueInstructions"}))}h.isMDXComponent=!0}}]);