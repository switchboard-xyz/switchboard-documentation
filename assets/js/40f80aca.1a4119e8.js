"use strict";(self.webpackChunk_switchboard_xyz_v2_docs=self.webpackChunk_switchboard_xyz_v2_docs||[]).push([[2833],{5318:function(e,t,r){r.d(t,{Zo:function(){return u},kt:function(){return m}});var n=r(7378);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var c=n.createContext({}),l=function(e){var t=n.useContext(c),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},u=function(e){var t=l(e.components);return n.createElement(c.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},p=n.forwardRef((function(e,t){var r=e.components,o=e.mdxType,a=e.originalType,c=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),p=l(r),m=o,h=p["".concat(c,".").concat(m)]||p[m]||d[m]||a;return r?n.createElement(h,i(i({ref:t},u),{},{components:r})):n.createElement(h,i({ref:t},u))}));function m(e,t){var r=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=r.length,i=new Array(a);i[0]=p;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s.mdxType="string"==typeof e?e:o,i[1]=s;for(var l=2;l<a;l++)i[l]=r[l];return n.createElement.apply(null,i)}return n.createElement.apply(null,r)}p.displayName="MDXCreateElement"},9522:function(e,t,r){var n=r(7914);t.Z=void 0;!function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=i(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}n.default=e,r&&r.set(e,n)}(r(7378));var o=n(r(9124)),a=r(4246);function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}var s=(0,o.default)((0,a.jsx)("path",{d:"M12 1.27a11 11 0 00-3.48 21.46c.55.09.73-.28.73-.55v-1.84c-3.03.64-3.67-1.46-3.67-1.46-.55-1.29-1.28-1.65-1.28-1.65-.92-.65.1-.65.1-.65 1.1 0 1.73 1.1 1.73 1.1.92 1.65 2.57 1.2 3.21.92a2 2 0 01.64-1.47c-2.47-.27-5.04-1.19-5.04-5.5 0-1.1.46-2.1 1.2-2.84a3.76 3.76 0 010-2.93s.91-.28 3.11 1.1c1.8-.49 3.7-.49 5.5 0 2.1-1.38 3.02-1.1 3.02-1.1a3.76 3.76 0 010 2.93c.83.74 1.2 1.74 1.2 2.94 0 4.21-2.57 5.13-5.04 5.4.45.37.82.92.82 2.02v3.03c0 .27.1.64.73.55A11 11 0 0012 1.27"}),"GitHub");t.Z=s},2133:function(e,t,r){r.d(t,{Z:function(){return g}});var n=r(808),o=r(5773),a=r(7378),i=r(8944),s=r(3892),c=r(7818),l=r(2709),u=r(2399),d=r(2858),p=r(1640),m=r(765);function h(e){return(0,m.Z)("MuiIconButton",e)}var f=(0,r(2897).Z)("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),v=r(4246);const b=["edge","children","className","color","disabled","disableFocusRipple","size"],y=(0,l.ZP)(d.Z,{name:"MuiIconButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,"default"!==r.color&&t[`color${(0,p.Z)(r.color)}`],r.edge&&t[`edge${(0,p.Z)(r.edge)}`],t[`size${(0,p.Z)(r.size)}`]]}})((({theme:e,ownerState:t})=>(0,o.Z)({textAlign:"center",flex:"0 0 auto",fontSize:e.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:e.palette.action.active,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest})},!t.disableRipple&&{"&:hover":{backgroundColor:(0,c.Fq)(e.palette.action.active,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"start"===t.edge&&{marginLeft:"small"===t.size?-3:-12},"end"===t.edge&&{marginRight:"small"===t.size?-3:-12})),(({theme:e,ownerState:t})=>(0,o.Z)({},"inherit"===t.color&&{color:"inherit"},"inherit"!==t.color&&"default"!==t.color&&(0,o.Z)({color:e.palette[t.color].main},!t.disableRipple&&{"&:hover":{backgroundColor:(0,c.Fq)(e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}}),"small"===t.size&&{padding:5,fontSize:e.typography.pxToRem(18)},"large"===t.size&&{padding:12,fontSize:e.typography.pxToRem(28)},{[`&.${f.disabled}`]:{backgroundColor:"transparent",color:e.palette.action.disabled}})));var g=a.forwardRef((function(e,t){const r=(0,u.Z)({props:e,name:"MuiIconButton"}),{edge:a=!1,children:c,className:l,color:d="default",disabled:m=!1,disableFocusRipple:f=!1,size:g="medium"}=r,w=(0,n.Z)(r,b),k=(0,o.Z)({},r,{edge:a,color:d,disabled:m,disableFocusRipple:f,size:g}),R=(e=>{const{classes:t,disabled:r,color:n,edge:o,size:a}=e,i={root:["root",r&&"disabled","default"!==n&&`color${(0,p.Z)(n)}`,o&&`edge${(0,p.Z)(o)}`,`size${(0,p.Z)(a)}`]};return(0,s.Z)(i,h,t)})(k);return(0,v.jsx)(y,(0,o.Z)({className:(0,i.Z)(R.root,l),centerRipple:!0,focusRipple:!f,disabled:m,ref:t,ownerState:k},w,{children:c}))}))},9961:function(e,t,r){r.r(t),r.d(t,{contentTitle:function(){return p},default:function(){return v},frontMatter:function(){return d},metadata:function(){return m},toc:function(){return h}});var n=r(5773),o=r(808),a=(r(7378),r(5318)),i=r(2133),s=r(2750),c=r(5310),l=r(9522),u=["components"],d={sidebar_position:60,slug:"/randomness",title:"Randomness"},p=void 0,m={unversionedId:"randomness",id:"randomness",title:"Randomness",description:"While Switchboard V2's oracle network is fully audited, the VRF implementation is currently unaudited software. Please use at your own risk.",source:"@site/docs/randomness.mdx",sourceDirName:".",slug:"/randomness",permalink:"/randomness",tags:[],version:"current",sidebarPosition:60,frontMatter:{sidebar_position:60,slug:"/randomness",title:"Randomness"},sidebar:"tutorialSidebar",previous:{title:"Job Directory",permalink:"/job-directory"},next:{title:"Private Queues",permalink:"/private-queues"}},h=[{value:"Architecture",id:"architecture",children:[{value:"Create Account",id:"create-account",children:[],level:3},{value:"Create &amp; Approve Permissions",id:"create--approve-permissions",children:[],level:3},{value:"Request Randomness",id:"request-randomness",children:[],level:3}],level:2}],f={toc:h};function v(e){var t=e.components,r=(0,o.Z)(e,u);return(0,a.kt)("wrapper",(0,n.Z)({},f,r,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,a.kt)("div",{parentName:"div",className:"admonition-heading"},(0,a.kt)("h5",{parentName:"div"},(0,a.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,a.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,a.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"caution")),(0,a.kt)("div",{parentName:"div",className:"admonition-content"},(0,a.kt)("p",{parentName:"div"},"While Switchboard V2's oracle network is fully audited, the VRF implementation is currently unaudited software. Please use at your own risk."))),(0,a.kt)("p",null,"Switchboard V2\u2019s VRF allows developers to request and use a pseudo-random value on-chain. The V2 implementation is written in anchor and provides a callback interface to invoke your program when an update request is finalized by an oracle."),(0,a.kt)("h2",{id:"architecture"},"Architecture"),(0,a.kt)("p",null,"A VRF account is an on-chain account that holds the latest VRF value, as well as its owners specified callback function. When a VRF account owner requests a new randomness value, the oracle queue delegates the update request to an oracle based on its round robin ordering of oracles heartbeating on-chain. The oracle submits its VRF seed on-chain, then must submit 276 transactions to turn the state machine, which computes the proof. When the proof is computed and successfully validates the pseudo-random value, the oracle invokes the account owner\u2019s callback instruction. The callback instruction must consume less than 160k compute units or it may fail to complete. If the callback fails, the oracle who completed the request is rewarded 90% of the specified reward. If the callback succeeds, the oracle is rewarded 100% of its reward."),(0,a.kt)("p",null,"You can view the full VRF walk-through in the example repo:"),(0,a.kt)(c.Z,{component:"a",href:"https://github.com/switchboard-xyz/vrf-cpi-example",target:"_blank",mdxType:"Box"},(0,a.kt)(i.Z,{component:"span",color:"primary","aria-label":"example repo",to:"https://github.com/switchboard-xyz/vrf-cpi-example",mdxType:"IconButton"},(0,a.kt)(l.Z,{fontSize:"large",mdxType:"GitHubIcon"})),(0,a.kt)(s.Z,{component:"span",mdxType:"Typography"},"@switchboard-xyz/VRF-CPI-Example")),(0,a.kt)("h3",{id:"create-account"},"Create Account"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"/api/switchboardv2-api/classes/VrfAccount#create"},"VrfAccount.create [typescript]"),": Create a VRF Account to hold your personal randomness value. You must specify an oracle queue to create your VRF Account for, which determines which oracles get allocated to update requests.")),(0,a.kt)("h3",{id:"create--approve-permissions"},"Create & Approve Permissions"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"/api/switchboardv2-api/classes/PermissionAccount#create"},"PermissionAccount.create [typescript]"),": Create a Permission Account for your VRF Account to use a queue's resources."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"/api/switchboardv2-api/classes/PermissionAccount#set"},"PermissionAccount.set [typescript]"),": The queue authority must approve a VRF Account before it can use its queues resources")),(0,a.kt)("h3",{id:"request-randomness"},"Request Randomness"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"/api/switchboardv2-api/classes/VrfAccount#requestrandomness"},"VrfAccount.requestRandomness"),": Request randomness once that previous request has resolved, or after 1 Minute. Assumes the payer has 0.1 wSOL in a wallet already.")))}v.isMDXComponent=!0}}]);