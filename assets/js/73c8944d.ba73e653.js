"use strict";(self.webpackChunk_switchboard_xyz_v2_docs=self.webpackChunk_switchboard_xyz_v2_docs||[]).push([[4730],{5310:function(e,t,a){a.d(t,{Z:function(){return k}});var n=a(5773),r=a(808),i=a(7378),o=a(8944),l=a(5642),s=a(1652),c=a(3772),u=a(6206),d=a(4246);const p=["className","component"];var h=a(4907);const m=function(e={}){const{defaultTheme:t,defaultClassName:a="MuiBox-root",generateClassName:h,styleFunctionSx:m=s.Z}=e,k=(0,l.ZP)("div")(m);return i.forwardRef((function(e,i){const l=(0,u.Z)(t),s=(0,c.Z)(e),{className:m,component:f="div"}=s,g=(0,r.Z)(s,p);return(0,d.jsx)(k,(0,n.Z)({as:f,ref:i,className:(0,o.Z)(m,h?h(a):a),theme:l},g))}))}({defaultTheme:(0,a(2905).Z)(),defaultClassName:"MuiBox-root",generateClassName:h.Z.generate});var k=m},9523:function(e,t,a){a.d(t,{Z:function(){return g}});var n=a(5773),r=a(808),i=a(7378),o=a(8944),l=a(3892),s=a(1640),c=a(2399),u=a(2709),d=a(765);function p(e){return(0,d.Z)("MuiSvgIcon",e)}(0,a(2897).Z)("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);var h=a(4246);const m=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],k=(0,u.ZP)("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,"inherit"!==a.color&&t[`color${(0,s.Z)(a.color)}`],t[`fontSize${(0,s.Z)(a.fontSize)}`]]}})((({theme:e,ownerState:t})=>{var a,n,r,i,o,l,s,c,u,d,p,h,m,k,f,g,b;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0,transition:null==(a=e.transitions)||null==(n=a.create)?void 0:n.call(a,"fill",{duration:null==(r=e.transitions)||null==(i=r.duration)?void 0:i.shorter}),fontSize:{inherit:"inherit",small:(null==(o=e.typography)||null==(l=o.pxToRem)?void 0:l.call(o,20))||"1.25rem",medium:(null==(s=e.typography)||null==(c=s.pxToRem)?void 0:c.call(s,24))||"1.5rem",large:(null==(u=e.typography)||null==(d=u.pxToRem)?void 0:d.call(u,35))||"2.1875"}[t.fontSize],color:null!=(p=null==(h=e.palette)||null==(m=h[t.color])?void 0:m.main)?p:{action:null==(k=e.palette)||null==(f=k.action)?void 0:f.active,disabled:null==(g=e.palette)||null==(b=g.action)?void 0:b.disabled,inherit:void 0}[t.color]}})),f=i.forwardRef((function(e,t){const a=(0,c.Z)({props:e,name:"MuiSvgIcon"}),{children:i,className:u,color:d="inherit",component:f="svg",fontSize:g="medium",htmlColor:b,inheritViewBox:w=!1,titleAccess:v,viewBox:y="0 0 24 24"}=a,N=(0,r.Z)(a,m),S=(0,n.Z)({},a,{color:d,component:f,fontSize:g,instanceFontSize:e.fontSize,inheritViewBox:w,viewBox:y}),x={};w||(x.viewBox=y);const q=(e=>{const{color:t,fontSize:a,classes:n}=e,r={root:["root","inherit"!==t&&`color${(0,s.Z)(t)}`,`fontSize${(0,s.Z)(a)}`]};return(0,l.Z)(r,p,n)})(S);return(0,h.jsxs)(k,(0,n.Z)({as:f,className:(0,o.Z)(q.root,u),ownerState:S,focusable:"false",color:b,"aria-hidden":!v||void 0,role:v?"img":void 0,ref:t},x,N,{children:[i,v?(0,h.jsx)("title",{children:v}):null]}))}));f.muiName="SvgIcon";var g=f},1658:function(e,t,a){a.d(t,{ZP:function(){return u}});var n=a(5773),r=a(808),i=(a(7378),a(5318)),o=a(8128),l=(a(1510),a(2750)),s=["components"],c={toc:[]};function u(e){var t=e.components,a=(0,r.Z)(e,s);return(0,i.kt)("wrapper",(0,n.Z)({},c,a,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("table",null,(0,i.kt)("thead",null,(0,i.kt)("tr",null,(0,i.kt)("th",null,"Instruction"),(0,i.kt)("th",null,"API Resource(s)"),(0,i.kt)("th",null,"Description"))),(0,i.kt)("tbody",null,(0,i.kt)("tr",null,(0,i.kt)("td",null,(0,i.kt)("b",null,"OracleInit")),(0,i.kt)("td",null,(0,i.kt)("a",{className:"nowrap",href:"/api/switchboardv2-api/classes/OracleAccount#create"},(0,i.kt)(o.WZi,{className:"devicons__nowrap",mdxType:"SiTypescript"})," Typescript"),(0,i.kt)("br",null),(0,i.kt)("a",{className:"nowrap",href:"/api/switchboardpy/oracle#oracleinitparams-objects"},(0,i.kt)(o.Cul,{className:"devicons__nowrap",mdxType:"SiPython"})," Python"),(0,i.kt)("br",null),(0,i.kt)("a",{className:"nowrap",href:"/api/switchboardv2-cli/oracle#sbv2-oraclecreate-queuekey"},(0,i.kt)(o.wdL,{className:"devicons__nowrap",mdxType:"SiPowershell"})," CLI")),(0,i.kt)("td",null,(0,i.kt)(l.Z,{mdxType:"Typography"},"Create a new OracleAccount with a specified configuration"))),(0,i.kt)("tr",null,(0,i.kt)("td",null,(0,i.kt)("b",null,"PermissionInit")),(0,i.kt)("td",null,(0,i.kt)("a",{className:"nowrap",href:"/api/switchboardv2-api/classes/PermissionAccount#create"},(0,i.kt)(o.WZi,{className:"devicons__nowrap",mdxType:"SiTypescript"})," Typescript"),(0,i.kt)("br",null),(0,i.kt)("a",{className:"nowrap",href:"/api/switchboardpy/permission#permissioninitparams-objects"},(0,i.kt)(o.Cul,{className:"devicons__nowrap",mdxType:"SiPython"})," Python")),(0,i.kt)("td",null,(0,i.kt)(l.Z,{mdxType:"Typography"},"Create a new PermissionAccount with an oracle queue as the grantee"))),(0,i.kt)("tr",null,(0,i.kt)("td",null,(0,i.kt)("b",null,"OracleHeartbeat")),(0,i.kt)("td",null,(0,i.kt)("a",{className:"nowrap",href:"/api/switchboardv2-api/classes/OracleAccount#heartbeat"},(0,i.kt)(o.WZi,{className:"devicons__nowrap",mdxType:"SiTypescript"})," Typescript")),(0,i.kt)("td",null,(0,i.kt)(l.Z,{mdxType:"Typography"},"Heartbeat on-chain and signal an oracle is ready for update request"))),(0,i.kt)("tr",null,(0,i.kt)("td",null,(0,i.kt)("b",null,"OracleWithdraw")),(0,i.kt)("td",null,(0,i.kt)("a",{className:"nowrap",href:"/api/switchboardv2-api/classes/OracleAccount#withdraw"},(0,i.kt)(o.WZi,{className:"devicons__nowrap",mdxType:"SiTypescript"})," Typescript"),(0,i.kt)("br",null),(0,i.kt)("a",{className:"nowrap",href:"/api/switchboardpy/oracle#oraclewithdrawparams-objects"},(0,i.kt)(o.Cul,{className:"devicons__nowrap",mdxType:"SiPython"})," Python"),(0,i.kt)("br",null),(0,i.kt)("a",{className:"nowrap",href:"/api/switchboardv2-cli/oracle#sbv2-oraclewithdraw-oraclekey-amount"},(0,i.kt)(o.wdL,{className:"devicons__nowrap",mdxType:"SiPowershell"})," CLI")),(0,i.kt)("td",null,(0,i.kt)(l.Z,{mdxType:"Typography"},"Withdraw from an oracle's tokenAccount"))),(0,i.kt)("tr",null,(0,i.kt)("td",null,(0,i.kt)("b",null,"AggregatorSaveResult")),(0,i.kt)("td",null,(0,i.kt)("a",{className:"nowrap",href:"/api/switchboardv2-api/classes/AggregatorAccount#saveresult"},(0,i.kt)(o.WZi,{className:"devicons__nowrap",mdxType:"SiTypescript"})," Typescript")),(0,i.kt)("td",null,(0,i.kt)(l.Z,{mdxType:"Typography"},"Respond to an aggregator update request after executing the assigned job accounts"))))))}u.isMDXComponent=!0},8220:function(e,t,a){a.r(t),a.d(t,{contentTitle:function(){return s},default:function(){return p},frontMatter:function(){return l},metadata:function(){return c},toc:function(){return u}});var n=a(5773),r=a(808),i=(a(7378),a(5318)),o=["components"],l={},s=void 0,c={unversionedId:"idl/accounts/OracleAccountData",id:"idl/accounts/OracleAccountData",title:"OracleAccountData",description:"Size 0.00531744 SOL",source:"@site/api/idl/accounts/OracleAccountData.md",sourceDirName:"idl/accounts",slug:"/idl/accounts/OracleAccountData",permalink:"/api/idl/accounts/OracleAccountData",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"LeaseAccountData",permalink:"/api/idl/accounts/LeaseAccountData"},next:{title:"OracleQueueAccountData",permalink:"/api/idl/accounts/OracleQueueAccountData"}},u=[],d={toc:u};function p(e){var t=e.components,a=(0,r.Z)(e,o);return(0,i.kt)("wrapper",(0,n.Z)({},d,a,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("b",null,"Size: "),"636 Bytes",(0,i.kt)("br",null),(0,i.kt)("b",null,"Rent Exemption: "),"0.00531744 SOL",(0,i.kt)("br",null),(0,i.kt)("br",null),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Field"),(0,i.kt)("th",{parentName:"tr",align:null},"Type"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"name"),(0,i.kt)("td",{parentName:"tr",align:null},"u8","[32]"),(0,i.kt)("td",{parentName:"tr",align:null},"Name of the oracle to store on-chain.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"metadata"),(0,i.kt)("td",{parentName:"tr",align:null},"u8","[128]"),(0,i.kt)("td",{parentName:"tr",align:null},"Metadata of the oracle to store on-chain.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"oracleAuthority"),(0,i.kt)("td",{parentName:"tr",align:null},"publicKey"),(0,i.kt)("td",{parentName:"tr",align:null},"Public key of the authority who owns the oracle account")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"lastHeartbeat"),(0,i.kt)("td",{parentName:"tr",align:null},"i64"),(0,i.kt)("td",{parentName:"tr",align:null},"Timestamp when the oracle last heartbeated")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"numInUse"),(0,i.kt)("td",{parentName:"tr",align:null},"u32"),(0,i.kt)("td",{parentName:"tr",align:null},"Flag dictating if an oracle is active and has heartbeated before the queue's oracle timeout parameter")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"tokenAccount"),(0,i.kt)("td",{parentName:"tr",align:null},"publicKey"),(0,i.kt)("td",{parentName:"tr",align:null},"Stake account and reward/slashing wallet")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"queuePubkey"),(0,i.kt)("td",{parentName:"tr",align:null},"publicKey"),(0,i.kt)("td",{parentName:"tr",align:null},"Public key of the oracle queue who has granted it permission to use its resources")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"metrics"),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"/api/idl/types/OracleMetrics"},"OracleMetrics")),(0,i.kt)("td",{parentName:"tr",align:null},"Oracle track record")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"ebuf"),(0,i.kt)("td",{parentName:"tr",align:null},"u8","[256]"),(0,i.kt)("td",{parentName:"tr",align:null},"Reserved")))))}p.isMDXComponent=!0},6003:function(e,t,a){var n=a(5310),r=a(7378),i=a(1142),o=a(2638);t.Z=function(e){var t=(0,o.Z)().isDarkTheme,a="inherit";e.lightBg&&!t&&(a=e.lightBg),e.darkBg&&t&&(a=e.darkBg);var l={};return e.sx&&(l=Object.assign({backgroundColor:a,m:"auto",display:"flex"},l,e.sx)),r.createElement(n.Z,{component:"img",sx:l,src:(0,i.Z)(e.img)})}},1510:function(e,t,a){a.d(t,{N:function(){return o}});var n=a(9523),r=a(5773),i=a(7378);function o(e){return i.createElement(n.Z,(0,r.Z)({},e,{viewBox:"0 0 251 283.9"}),i.createElement("linearGradient",{id:"SVGID_1_",gradientUnits:"userSpaceOnUse",x1:"125.5",y1:"52.0877",x2:"125.5",y2:"253.0878",gradientTransform:"matrix(1 0 0 -1 0 285.9755)"},i.createElement("stop",{offset:"0"}),i.createElement("stop",{offset:"1"})),i.createElement("path",{d:"M125.5,233.9c-43.1,0-78.1-35-78.1-78.1c0-41.9,70.7-115.9,73.7-119l3.7-3.9l3.8,3.8c3.1,3.1,75,77.1,75,119 C203.6,198.9,168.6,233.9,125.5,233.9L125.5,233.9z M124.9,48c-6.2,6.7-19.2,21.2-32.1,38.2c-22.9,30.2-35,54.2-35,69.5 c0,37.3,30.4,67.7,67.7,67.7s67.7-30.4,67.7-67.7c0-15.3-12.3-39.3-35.6-69.5C144.5,69.3,131.2,54.7,124.9,48z"}),i.createElement("linearGradient",{id:"SVGID_2_",gradientUnits:"userSpaceOnUse",x1:"125.6",y1:"27.0877",x2:"125.6",y2:"269.3627",gradientTransform:"matrix(1 0 0 -1 0 285.9755)"},i.createElement("stop",{offset:"0"}),i.createElement("stop",{offset:"1"})),i.createElement("path",{d:"M125.5,258.9c-56.9,0-103.1-46.3-103.1-103.1c0-55.6,77.6-133.2,80.9-136.4c2-2,5.4-2,7.4,0s2,5.4,0,7.4 c-0.8,0.8-77.8,77.8-77.8,129c0,51.1,41.6,92.7,92.7,92.7s92.7-41.6,92.7-92.7c0-21-13.6-50-39.4-84.1 c-19.8-26.1-39.7-45.9-39.9-46.1c-2.1-2-2.1-5.3,0-7.4c2-2.1,5.3-2.1,7.4,0c3.4,3.3,82.4,81.9,82.4,137.6 C228.6,212.6,182.4,258.9,125.5,258.9L125.5,258.9z"}),i.createElement("linearGradient",{id:"SVGID_3_",gradientUnits:"userSpaceOnUse",x1:"125.5",y1:"2.0877",x2:"125.5",y2:"285.9755",gradientTransform:"matrix(1 0 0 -1 0 285.9755)"},i.createElement("stop",{offset:"0"}),i.createElement("stop",{offset:"1"})),i.createElement("path",{d:"M125.5,283.9C56.3,283.9,0,227.6,0,158.4c0-28.6,14.4-63.8,42.7-104.5C63.6,23.9,84.1,2.5,85,1.6 c2-2.1,5.3-2.1,7.4-0.1s2.1,5.3,0.1,7.4C92.3,9.1,71.6,30.7,51.2,60c-26.7,38.3-40.8,72.3-40.8,98.4c0,63.4,51.6,115.1,115.1,115.1 s115.1-51.6,115.1-115.1c0-26.1-14.2-60.1-41.1-98.4C178.9,30.7,158,9.1,157.8,8.9c-2-2.1-2-5.4,0.1-7.4s5.4-2,7.4,0.1 c3.5,3.6,85.7,89,85.7,156.8C251,227.6,194.7,283.9,125.5,283.9z"}))}},4463:function(e,t,a){a.r(t),a.d(t,{contentTitle:function(){return u},default:function(){return m},frontMatter:function(){return c},metadata:function(){return d},toc:function(){return p}});var n=a(5773),r=a(808),i=(a(7378),a(5318)),o=(a(6003),a(9556)),l=(a(1658),a(8220)),s=["components"],c={sidebar_position:10,title:"Oracle",slug:"."},u=void 0,d={unversionedId:"architecture/oracles/oracle",id:"architecture/oracles/oracle",title:"Oracle",description:"A Switchboard oracle is a node.js container that sits between the Solana blockchain and the internet and waits for data feed update requests from an oracle queue. An oracle queue is responsible for managing realm permissions and assigning oracles to aggregator updates in a round robin fashion. When an oracle is assigned an update request, it reads in the aggregator job definitions, executes each job, takes the median of the job results, then publishes its result on-chain.",source:"@site/docs/architecture/oracles/oracle.mdx",sourceDirName:"architecture/oracles",slug:"/architecture/oracles/",permalink:"/architecture/oracles/",tags:[],version:"current",sidebarPosition:10,frontMatter:{sidebar_position:10,title:"Oracle",slug:"."},sidebar:"tutorialSidebar",previous:{title:"Permissions",permalink:"/architecture/permissions/"},next:{title:"Oracle Buffer",permalink:"/architecture/oracles/oracle-buffer"}},p=[{value:"Queue Configuration",id:"queue-configuration",children:[{value:"\u2699\ufe0fminStake",id:"\ufe0fminstake",children:[],level:3},{value:"\u2699\ufe0fOracle Rewards",id:"\ufe0foracle-rewards",children:[],level:3},{value:"\u2699\ufe0fSlashing",id:"\ufe0fslashing",children:[],level:3}],level:2},{value:"Functions",id:"functions",children:[{value:"\ud83d\ude80Provide minStake",id:"provide-minstake",children:[],level:3},{value:"\ud83d\ude80Heartbeat",id:"heartbeat",children:[],level:3},{value:"\ud83d\ude80Fulfill Update Requests",id:"fulfill-update-requests",children:[],level:3}],level:2},{value:"Account Schema",id:"account-schema",children:[{value:"\ud83d\udce6OracleAccountData",id:"oracleaccountdata",children:[],level:3}],level:2},{value:"More Info",id:"more-info",children:[],level:2}],h={toc:p};function m(e){var t=e.components,a=(0,r.Z)(e,s);return(0,i.kt)("wrapper",(0,n.Z)({},h,a,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"A Switchboard oracle is a node.js container that sits between the Solana blockchain and the internet and waits for data feed update requests from an oracle queue. An oracle queue is responsible for managing realm permissions and assigning oracles to aggregator updates in a round robin fashion. When an oracle is assigned an update request, it reads in the aggregator job definitions, executes each job, takes the median of the job results, then publishes its result on-chain."),(0,i.kt)("p",null,"An oracle account is a program derived address (PDA) between the oracle queue it\u2019s being initialized for, as well as the authority public key which will control it. Before an oracle is granted permissions to use a queue, it must transfer the minimum stake amount, set by the queue, to its escrow wallet. Once an oracle is granted permissions to use a queue\u2019s resources by the queue authority, it can start heartbeating on-chain, at an interval set by the queue, indicating it is ready to be assigned data feed update requests."),(0,i.kt)("h2",{id:"queue-configuration"},"Queue Configuration"),(0,i.kt)("h3",{id:"\ufe0fminstake"},"\u2699\ufe0fminStake"),(0,i.kt)("p",null,"Oracles are required to provide the queue's ",(0,i.kt)("inlineCode",{parentName:"p"},"minStake")," to the oracle's tokenAccount, which acts as an insurance policy to entice oracle operators to report honest results. Each oracle queue can have different staking requirements to influence its security. If the staking requirement is set too low it could attract dishonest oracles, but if set too high oracles may find a better use of their capital elsewhere."),(0,i.kt)("h3",{id:"\ufe0foracle-rewards"},"\u2699\ufe0fOracle Rewards"),(0,i.kt)("p",null,"An oracle\u2019s reward for a given round is determined by the queue's ",(0,i.kt)("inlineCode",{parentName:"p"},"reward"),". Oracles are rewarded each time they submit a result and then reevaluated when an accepted result has been accepted. When a result has been accepted, the oracle rewards are redistributed to the oracles that responded within the acceptable range. The median result filters the outliers and means an attacker needs to control the majority of the assigned oracles in order to skew a result. This is why increasing the queue's ",(0,i.kt)("inlineCode",{parentName:"p"},"minStake")," requirements increases the security of the network because the attacker will need more up-front capital to fund the attack. Oracle\u2019s get assigned to data feeds in a round robin fashion with feeds scheduled at varying intervals and oracle batchSize's, so even if an attacker controls a large number of the queue's oracles, there is no guarantee their oracles will get assigned to the same feed."),(0,i.kt)("h3",{id:"\ufe0fslashing"},"\u2699\ufe0fSlashing"),(0,i.kt)("p",null,"Switchboard uses the median oracle response to determine the accepted result. When initializing a queue, the queue ",(0,i.kt)("inlineCode",{parentName:"p"},"authority")," specifies a ",(0,i.kt)("inlineCode",{parentName:"p"},"varianceToleranceMultiplier")," which determines the range oracle responses may differ. An oracle queue defaults to two standard deviations. If a queue has ",(0,i.kt)("inlineCode",{parentName:"p"},"slashingEnabled"),", any oracle who responded outside the acceptable range will be slashed and lose a portion of their staked capital. The slashing amount can be changed by the DAO to further incentivize honest oracle behavior."),(0,i.kt)("h2",{id:"functions"},"Functions"),(0,i.kt)("p",null,"An oracle is responsible for the following functions:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"#provide-minStake"},(0,i.kt)("strong",{parentName:"a"},"Provide minStake")),": Must provide the minimum amount specified by the queue."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"#heartbeat"},(0,i.kt)("strong",{parentName:"a"},"Heartbeat")),": Must continually heartbeat in order to be assigned update requests."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"#fulfill-update-requests"},(0,i.kt)("strong",{parentName:"a"},"Fulfill Update Requests")),": Must execute assigned update requests honestly to receive the reward.")),(0,i.kt)("h3",{id:"provide-minstake"},"\ud83d\ude80Provide minStake"),(0,i.kt)("p",null,"The oracle\u2019s escrow wallet is used to provide the minimum stake as a security deposit, receive rewards for successfully fulfilling data feed updates, and if enabled, for slashing if incorrect values are submitted on-chain. The Switchboard oracle container must contain a Solana keypair to pay for the on-chain heartbeats and submitting update results. You may need to periodically withdraw funds from the escrow wallet to your Solana keypair in order to fund on-chain transactions."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Note:")," if an oracle's ",(0,i.kt)("inlineCode",{parentName:"p"},"tokenAccount")," falls below the queue's minimum stake, it will be removed from the queue and any future queue activities will fail."),(0,i.kt)("h3",{id:"heartbeat"},"\ud83d\ude80Heartbeat"),(0,i.kt)("p",null,"An oracle must continually heartbeat in order to be assigned update requests."),(0,i.kt)("h3",{id:"fulfill-update-requests"},"\ud83d\ude80Fulfill Update Requests"),(0,i.kt)("p",null,"An oracle must execute assigned update requests honestly to receive the reward. An aggregator contains a set of job definitions along with its configuration, which includes oracle batch size; Oracle batch size is the number of oracles that get assigned to each aggregator update request. When enough oracles respond to an update, the on-chain contract takes the median value of the oracle responses as the final result. If an oracle\u2019s response falls within the queue\u2019s set variance threshold, the oracle\u2019s escrow wallet receives a set amount of tokens, as specified by the queue. If a queue has slashing enabled and the oracle\u2019s response falls outside the variance threshold, an oracle\u2019s escrow wallet is deducted the set queue reward. This incentivizes oracle\u2019s to report honest results and enforces a higher degree of oracle collusion to influence the accepted result."),(0,i.kt)("p",null,"For example, if a queue has a reward of 12500 tokens and an aggregator has an oracle batch size of 5, then it will cost the aggregator 62500 tokens for every update request, and each oracle receives 12500 tokens. If the oracle results are ","[$0, $99, $100, $101, $200]",", then the accepted result will be $100, the first and last oracle will be deducted 12500 tokens each, and the middle 3 oracles will receive a reward of 12500 tokens."),(0,i.kt)("h2",{id:"account-schema"},"Account Schema"),(0,i.kt)("h3",{id:"oracleaccountdata"},"\ud83d\udce6OracleAccountData"),(0,i.kt)(l.default,{mdxType:"OracleAccountData"}),(0,i.kt)("h2",{id:"more-info"},"More Info"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)(o.Z,{className:"link__nocolor",to:"/oracle",mdxType:"Link"},"\u2139\ufe0f Run an oracle"))))}m.isMDXComponent=!0}}]);